monitor=,preferred,auto,1

# TODO: Find out what this is.
env = XCURSOR_SIZE,24

misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
}

input {
    kb_layout = us

    follow_mouse = 1

    touchpad {
        # Invert scroll direction, so that dragging up scrolls *down*.
        # I.e, what I'm used to from the Mac.
        natural_scroll = yes
    }

    sensitivity = 0 # -1.0 - 1.0, 0 means no modification.
}

general {
    layout = master

    gaps_in = 6
    gaps_out = 12

    border_size = 2
    col.active_border = rgba(33ccffee) rgba(00ff99ee) 45deg
    col.inactive_border = rgba(595959aa)
}

decoration {
    rounding = 0

    blur {
        enabled = true
        size = 4
    }

    dim_special = 0.8
}

animations {
    enabled = no
}

master {
    # Apply exact 50/50 split between master and stack.
    # The default is 0.55, making the master slightly wider than the stack.
    mfact = 0.5
}

gestures {
    workspace_swipe = off
}


#===============================================================================
# RULES

# Make terminal subtly transparent
windowrulev2 = opacity 0.9,class:^(kitty)$

# Silently move terminal entitled "scratch" to scratchpad
windowrulev2 = workspace special:term silent,class:^(kitty)$,title:^(scratch)$

# Loudly move terminal entitled "scratch!" to scratchpad
windowrulev2 = workspace special:term,class:^(kitty)$,title:^(scratch\!)$


#===============================================================================
# KEYS

$mod = SUPER
$alt_mod = $mod SHIFT

# Quit Hyprland
bind = $alt_mod, delete, exit,

# Close focused window
bind = $mod, backspace, killactive,

# Bring up launcher
bind = $mod, space, exec, tofi-drun | xargs hyprctl dispatch exec --

# Launch applications
bind = $mod, T, exec, kitty
bind = $mod, B, exec, firefox
bind = $mod, E, exec, code

# Spawn new scratchpad terminal
bind = $alt_mod, grave, exec, kitty --title scratch!

#-------------------------------------------------------------------------------
# NAVIGATION

# Move focus with arrow keys
bind = $mod, left, movefocus, l
bind = $mod, right, movefocus, r
bind = $mod, up, movefocus, u
bind = $mod, down, movefocus, d

# Cycle through windows with mod+tab
bind = $mod, tab, cyclenext, next
bind = $alt_mod, tab, cyclenext, prev

# Go to previous/next workspace with PgDown/PgUp
bind = $mod, prior, workspace, -1
bind = $mod, next, workspace, +1

# Switch workspace
bind = $mod, 1, workspace, 1
bind = $mod, 2, workspace, 2
bind = $mod, 3, workspace, 3
bind = $mod, 4, workspace, 4
bind = $mod, 5, workspace, 5
bind = $mod, 6, workspace, 6
bind = $mod, 7, workspace, 7
bind = $mod, 8, workspace, 8
bind = $mod, 9, workspace, 9

# Toggle terminal scratchpad
bind = $mod, grave, togglespecialworkspace, term

# Toggle general scratchpad
bind = $mod, bracketleft, togglespecialworkspace, gen1
bind = $mod, bracketright, togglespecialworkspace, gen2

#-------------------------------------------------------------------------------
# MOVING WINDOWS

# Swap windows
bind = $alt_mod, left, swapnext, prev
bind = $alt_mod, right, swapnext, next

# Drag focused window to previous/next workspace
bind = $alt_mod, prior, movetoworkspace, -1
bind = $alt_mod, next, movetoworkspace, +1

# Move focused window to workspace
bind = $alt_mod, 1, movetoworkspacesilent, 1
bind = $alt_mod, 2, movetoworkspacesilent, 2
bind = $alt_mod, 3, movetoworkspacesilent, 3
bind = $alt_mod, 4, movetoworkspacesilent, 4
bind = $alt_mod, 5, movetoworkspacesilent, 5
bind = $alt_mod, 6, movetoworkspacesilent, 6
bind = $alt_mod, 7, movetoworkspacesilent, 7
bind = $alt_mod, 8, movetoworkspacesilent, 8
bind = $alt_mod, 9, movetoworkspacesilent, 9

# Move focused window to general scratchpad
bind = $alt_mod, bracketleft, movetoworkspacesilent, special:gen1
bind = $alt_mod, bracketright, movetoworkspacesilent, special:gen2

#-------------------------------------------------------------------------------
# LAYOUT

# Fullscreen focused window
bind = $mod, f, fullscreen

# Maximize focused window
bind = $mod, return, fullscreen, 1

# Toggle floating mode for focused window
bind = $alt_mod, return, togglefloating

# Change split ratio (move split point between windows)
bind = $mod, minus, splitratio, -0.05
bind = $mod, equal, splitratio, +0.05
bind = $mod, 0, splitratio, exact 0.5

#-------------------------------------------------------------------------------
# MEDIA KEYS

# Volume
bindle = , XF86AudioRaiseVolume, exec, wpctl set-volume -l 1.5 @DEFAULT_AUDIO_SINK@ 5%+
bindle = , XF86AudioLowerVolume, exec, wpctl set-volume -l 1.5 @DEFAULT_AUDIO_SINK@ 5%-
bindle = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindle = , XF86AudioMicMute, exec, pactl set-source-mute @DEFAULT_SOURCE@ toggle

# Brightness
bindle = , XF86MonBrightnessDown, exec, light -U 10
bindle = , XF86MonBrightnessUp, exec, light -A 10


#===============================================================================
# INIT

# Launch the bar
exec-once = waybar --config ~/.config/waybar/config.hypr.jsonc

# Set the wallpaper
exec-once = hyprpaper

# Start notification daemon
exec-once = mako

# Spawn scratchpad terminal
exec-once = kitty --title scratch -d ~/sys
